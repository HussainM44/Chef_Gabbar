{% extends 'base.html' %}

{% block content %}

<h1>Profile</h1>
<hr>
<h2> Personal details</h2>
<p>Name : {{object.username}} </p>
{% load static %}
          {% if object.profile.image %}
              <img
                src="{{ object.profile.image.url }}"
                width="100"
                height="100"
                alt="{{ object.username }}"
                style="border-radius: 8px; object-fit: cover;">
          {% else %}
              <div style="width: 100px; height: 100px; border-radius: 8px; background-color: #8b0000; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; font-size: 36px;">
                  {{ object.username|slice:":1"|upper }}
              </div>
          {% endif %}
<p>Email : {{object.email}} </p>
<p>Address : {{object.profile.address}}</p>
<li>
  {% if request.user.id == user.id %}
  <a href= "{% url 'user_update' user.id %}">Edit Profile</a>
  {% endif %}
</li>

<h3>{{object.username}}'s Moments</h3>
{% if moments %}
  {% for moment in moments %}
    <div style="margin-bottom: 20px; padding: 15px; border: 1px solid #ddd; border-radius: 8px;">
      <p><strong>{{ moment.description }}</strong></p>
      {% if moment.file %}
        {% if '.mp4' in moment.file.url or '.webm' in moment.file.url or '.ogg' in moment.file.url or '.mov' in moment.file.url or '.avi' in moment.file.url %}
          <video width="100%" max-width="640px" controls>
            <source src="{{ moment.file.url }}" type="video/mp4">
            Your browser does not support the video tag.
          </video>
        {% elif '.jpg' in moment.file.url or '.jpeg' in moment.file.url or '.png' in moment.file.url or '.gif' in moment.file.url %}
          <img src="{{ moment.file.url }}" alt="Moment image" style="max-width: 640px; width: 100%; height: auto; border-radius: 8px;">
        {% else %}
          <p>File: <a href="{{ moment.file.url }}" target="_blank">View File</a></p>
        {% endif %}
      {% else %}
        <p style="color: #888;">No media attached</p>
      {% endif %}
      <p style="font-size: 12px; color: #666;">Posted on {{ moment.created_at|date:"M d, Y" }}</p>
    </div>
  {% endfor %}
{% else %}
  <h4>No Moments by User yet</h4>
{% endif %}




{% endblock %}
